schema: '2.0'
stages:
  prepare:
    cmd: PYTHONPATH=. python3 credit_fraud_pipeline/scripts/prepare.py
    deps:
    - path: credit_fraud_pipeline/scripts/prepare.py
      md5: badc46dd0991282139cd495395651993
      size: 556
    - path: data/archive.zip
      md5: bf8e9842731ab6f9b8ab51e1a6741f8b
      size: 69155672
    params:
      params.yaml:
        prepare.data_path: data/creditcard.csv
    outs:
    - path: data/prepared.pkl
      md5: c296f17cf08c47dc8afed08a73b6f395
      size: 70633290
  feature_engenc:
    cmd: PYTHONPATH=. python3 credit_fraud_pipeline/scripts/feature_engenc.py
    deps:
    - path: credit_fraud_pipeline/scripts/feature_engenc.py
      md5: 66be941b80e76c3a0076447bcbe1a247
      size: 1642
    - path: data/prepared.pkl
      md5: c296f17cf08c47dc8afed08a73b6f395
      size: 70633290
    params:
      params.yaml:
        feature_engenc.encoder_path: pickles/encoder.pkl
    outs:
    - path: data/features.pkl
      md5: b3e3031a11f099f19f73e350e9680b93
      size: 68354679
    - path: data/labels.pkl
      md5: 77b05e90588b603069a70d47269b4b3f
      size: 2279064
    - path: pickles/encoder.pkl
      md5: c829e8db11bc900014658700d3843ae3
      size: 1638
  train:
    cmd: PYTHONPATH=. python3 credit_fraud_pipeline/scripts/train.py
    deps:
    - path: credit_fraud_pipeline/scripts/train.py
      md5: b292cf5658136faa186bfe02ffaa62c9
      size: 6608
    - path: data/features.pkl
      md5: b3e3031a11f099f19f73e350e9680b93
      size: 68354679
    - path: data/labels.pkl
      md5: 77b05e90588b603069a70d47269b4b3f
      size: 2279064
    params:
      params.yaml:
        train.balanced: false
        train.cv: 3
        train.init_points: 4
        train.n_iter: 30
        train.num_boost_round: 100
        train.shuffle: true
        train.stratified: true
        train.test_size: 0.3
    outs:
    - path: pickles/metrics.json
      md5: 1fd9ad4ac0a17b8ad2eb66d4ed2c59fb
      size: 298
    - path: pickles/model.pkl
      md5: b2c70a501bad1ef7dfeb7ae9c9ac77ce
      size: 184357
